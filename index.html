<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Расписание — Университет (Mini App)</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!-- CSS moved to css/ -->
  <link rel="stylesheet" href="css/style.css">

  <!-- Telegram Web App SDK (оставляем, он не влияет на тему) -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- docx-preview -->
  <script src="https://unpkg.com/docx-preview@0.3.2/dist/docx-preview.min.js"></script>
</head>
<body>
  <div id="app" class="app">
    <!-- Header: только переключатель темы -->
    <header class="header">
      <div class="header-left">
        <button id="themeToggleBtn" class="theme-toggle-btn" aria-label="Переключить тему">
        <img src="img/themeToggle.png" alt="Сменить тему" />
        </button>
      </div>

      <div class="title">
        <h1 id="appTitle">Расписание занятий</h1>
        <p class="subtitle" id="subtitle">Выберите факультет → курс → специальность</p>
      </div>

      <div class="header-right">
        <!-- можно вставить логотип, статус и т.п. -->
      </div>
    </header>

    <div class="wizard-progress">
      <div id="progressBar" class="progress-bar">
        <div id="progressFill" class="progress-fill"></div>
      </div>
      <div id="stepText" class="step-text">Шаг 1 из 4</div>
    </div>

    <main class="screens">
      <section id="stepFaculty" class="screen active" data-step="1">
        <h2 class="screen-title">Выберите факультет</h2>
        <div id="facultiesList" class="cards-grid"></div>
      </section>

      <section id="stepCourse" class="screen" data-step="2">
        <h2 class="screen-title">Выберите курс</h2>
        <div id="coursesList" class="courses-grid"></div>
      </section>

      <section id="stepSpecialty" class="screen" data-step="3">
        <h2 class="screen-title">Выберите специальность</h2>
        <div class="search-wrap">
          <input id="specialtySearch" type="search" placeholder="Поиск специальности..." />
        </div>
        <div id="specialtiesList" class="cards-list"></div>
      </section>

      <section id="stepSchedule" class="screen" data-step="4">
        <div class="schedule-header">
          <h2 id="scheduleTitle" class="screen-title">Расписание</h2>
          <div class="schedule-actions">
            <button id="refreshBtn" class="btn">Обновить</button>
          </div>
        </div>

        <div id="scheduleContainer" class="schedule-container">
          <div id="loader" class="loader hidden">
            <div class="spinner"></div>
            <div id="loaderText">Загрузка расписания...</div>
          </div>

          <div id="errorBox" class="error-box hidden">
            <p id="errorMsg">Ошибка загрузки. Попробуйте позже.</p>
            <div class="error-actions">
              <button id="retryBtn" class="btn">Повторить</button>
              <button id="backToChooseBtn" class="btn ghost">Вернуться к выбору</button>
            </div>
          </div>

          <div id="notAvailableBox" class="not-available hidden">
            <p>Расписание для этой специальности пока не доступно.</p>
            <button id="naBackBtn" class="btn">Вернуться к выбору</button>
          </div>

          <div id="contentBox" class="content-box hidden">
            <div class="content-toolbar">
              <div id="convertWrapper" class="convert-wrapper hidden">
                <button id="convertToPdfBtn" class="btn ghost">Открыть в Google Docs (сохранить в PDF)</button>
              </div>

              <div class="zoom-controls" id="zoomControls">
                <!-- Не работает должным образом -->
                <!-- <button id="zoomOut" class="icon-btn">−</button>
                <span id="zoomLevel">100%</span>
                <button id="zoomIn" class="icon-btn">+</button> -->
              </div>

              <a id="rawLink" class="raw-link" href="#" target="_blank" rel="noopener">Открыть в новой вкладке</a>
            </div>

            <div id="viewerWrap" class="viewer-wrap">
              <iframe id="pdfViewer" class="viewer hidden" frameborder="0" sandbox="allow-scripts allow-same-origin"></iframe>
              <img id="imgViewer" class="viewer-img hidden" alt="Расписание" />
              <div id="fileDownload" class="file-download hidden">
                <p>Поддерживается скачивание файла:</p>
                <a id="downloadLink" href="#" target="_blank" rel="noopener" class="btn">Скачать</a>
              </div>
            </div>
          </div>
        </div>

      </section>
    </main>

    <footer class="footer">
      <div class="footer-left">
        <button id="prevStepBtn" class="btn ghost">Назад</button>
      </div>
      <div class="footer-right">
        <button id="nextStepBtn" class="btn">Далее</button>
      </div>
    </footer>
  </div>

  <!-- JS moved to js/ -->
  <script src="js/script.js" defer></script>
</body>
</html>
